#!/usr/bin/env sh
set -e

. "$(dirname -- "$0")/_/husky.sh"

# Run lint-staged first to validate staged files
npx lint-staged

# Generate API documentation after validation passes
echo "ğŸ”§ Generating API documentation..."
(cd packages/api && yarn run docgen) || exit 1

# Stage the generated openapi.json (git will only commit if it changed)
git add packages/api/openapi.json
echo "âœ… API documentation generated and staged"
